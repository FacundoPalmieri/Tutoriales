---
sidebar_position: 5
---

# 5 - Angular Avanzado

## Tablas

-   Importamos la referencia a la API en nuestro módulo padre.

![angular-tablas](/img/angular-tablas.png)

<br/>

![angular-tablas2](/img/angular-tablas2.png)

<br/>

- El componente .ts "padre" será el dueño de los datos.

![angular-tablas3](/img/angular-tablas3.png)

<br/>

-   El componente .ts "hijo" definiremos un ID para cada columna de la tabla.

-   Importaremos los datos del elementos padre con @Input()

![angular-tablas4](/img/angular-tablas4.png)


<br/>

-   En el HTML "hijo" haremos referencia a esos id y mostraremos los atributos del objeto element

![angular-tablas5](/img/angular-tablas5.png)


<br/>

-   En el HTML "Padre" recibo la Data para mostrar.

![angular-tablas6](/img/angular-tablas6.png)



## Formularios

### Agregar elemento a tabla

-   Importamos las referencia a la API en nuestro módulo padre.

    -   MatFormFieldModule: envoltura del input.
    -   MatInputModule: Inputs.
    -   MatButtonModule: Botones
    -   ReactiveFormsModule: Formularios reactivos.


![angular-form](/img/angular-form.png)

<br/>

-   Declaramos un **FormGroup** 

-   Inicialización del formulario en el constructor.

![angular-form2](/img/angular-form2.png)


<br/>

-    **Enlazar el formulario en la vista:** El formulario en el HTML está enlazado a studentForm usando la directiva formGroup. Esto establece que el formulario en la vista se asocie con el objeto de formulario definido en el componente.

-   **Control inputs:** Conectamos cada campo a un control del formulario.

![angular-form3](/img/angular-form3.png)


<br/>

-  Enviamos los datos desde el formulario para agregarlo a la tabla.

    - Al array students, le asignamos :
        - Todos los valores que ya tiene el array (... this.students)
        - El nuevo valor del formulario (this.studentForm.value)

![angular-form4](/img/angular-form4.png)



<br/>

-  Al enviar el formulario disparamos el evento para "guardar"

-  Debemos colocar el botón como "submit" y "mat-flat-button" para que sea reconocido por angular material

![angular-form5](/img/angular-form5.png)

<br/>

### Eliminar elemento de tabla


- Importamos la librería de Iconos.

![angular-form-eliminar0](/img/angular-form-eliminar0.png)

<br/>

![angular-form-eliminar](/img/angular-form-eliminar.png)


<br/>


-   Agregamos una columna a la tabla en el .ts

![angular-form-eliminar1](/img/angular-form-eliminar1.png)


<br/>

-   Agregamos una columna a la tabla en el HTML

-   Donde iria el dato, creamos un nuevo Botón.

-   Dentro de ese botón colocamos un icono "delete" que hace referencia a Google symbol

![angular-form-eliminar2](/img/angular-form-eliminar2.png)

<br/>

-   Generamos el evento @Output(): Permite enviar un evento desde un componente hijo hacia el componente padre.

-   new EventEmitter< number >() : Significa que este evento va a emitir un número (probablemente el ID del estudiante que querés eliminar).

![angular-form-eliminar3](/img/angular-form-eliminar3.png)

<br/>

-   Capturamos el evento click y llamamos a la función para que emita el id del estudiante.

![angular-form-eliminar4](/img/angular-form-eliminar4.png)


<br/>

-   Ahora desde el evento Padre, realizamos la lógica para escuchar el evento y realizar la acción

    -   **id: number:** Recibe el ID del estudiante que quiere eliminar (ese ID lo mandó el hijo con emit()).

    -   **confirm():** Muestra una ventanita al usuario para confirmar si realmente quiere eliminar.

    -   **.filter()** : Se deja afuera al estudiante con ese ID.

![angular-form-eliminar5](/img/angular-form-eliminar5.png)


<br/>

- **< app-students-table >:** Este es tu componente hijo, el que tiene el botón de eliminar y el @Output().

-  **(deleteStudent)="onDeleteStudent($event)":**

    -   Acá estás escuchando el evento que el hijo emitió con emit().

    -   $event contiene el valor que el hijo mandó: el ID del estudiante.

    -   Cuando ese evento ocurre, se llama a onDeleteStudent($event) en el padre → o sea, la función que ya escribiste.

![angular-form-eliminar6](/img/angular-form-eliminar6.png)



<br/>

### Editar elemento de tabla


-   Creamos un evento de edición en el componente hijo.

-   En lugar de emitir un id: number, vas a emitir un objeto Student completo.Para editar, normalmente necesitás mostrar todos los datos del estudiante en un formulario. Por eso es mejor mandar el objeto entero y no solo su ID.

![angular-form-editar](/img/angular-form-editar.png)

<br/>

-   En el HTML generamos un nuevo botón con el ícono de edición y llamamos al evento.

![angular-form-editar2](/img/angular-form-editar2.png)



<br/>

-   En el elemento "Padre" .ts

    -   Generamos una bandera que te dice si estás editando un estudiante (id) o si estás creando uno nuevo (null).

    -   Dentro del **submit** de crear, preguntamos si está editando o no.

        - .map() recorre el array students y devuelve un nuevo array. En cada vuelta, evalúa si ese estudiante es el que estás editando.

        - Si el id del estudiante actual coincide con el que estás editando → significa que es ese el que hay que actualizar.

        -   **...student** copia todo lo que ya tenía el estudiante.  **...this.studentForm.value** sobrescribe los campos con los nuevos valores del formulario.

    -   Generamos el evento OnEdit.
        -   Se guarda el id en isEditingId.

        -   Se cargan los datos al formulario (patchValue).



![angular-form-editar3](/img/angular-form-editar3.png)


<br/>

En el HTML padre, conectamos con el evento OnEdit()

![angular-form-editar4](/img/angular-form-editar4.png)